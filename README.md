# åˆå¶ğŸ‚ MetingAPI ç‚¹æ­Œæ’ä»¶

åŸºäº MetingAPI çš„ç‚¹æ­Œæ’ä»¶ï¼Œæ”¯æŒQQéŸ³ä¹ã€ç½‘æ˜“äº‘ã€é…·ç‹—ã€é…·æˆ‘ç­‰éŸ³æºã€‚

**å½“å‰ç‰ˆæœ¬ï¼šv1.0.4**

## åŠŸèƒ½ç‰¹æ€§

- æ”¯æŒå¤šéŸ³æºï¼šQQéŸ³ä¹ã€ç½‘æ˜“äº‘ã€é…·ç‹—ã€é…·æˆ‘
- ä¼šè¯çº§éŸ³æºåˆ‡æ¢ï¼Œä¸å½±å“å…¶ä»–ä¼šè¯
- æ™ºèƒ½è¯­éŸ³åˆ†æ®µå‘é€ï¼Œè‡ªåŠ¨å¤„ç†è¶…è¿‡2åˆ†é’Ÿçš„æ­Œæ›²
- ç®€å•æ˜“ç”¨çš„å‘½ä»¤äº¤äº’
- æ”¯æŒä¸‰ç§ API ç±»å‹ï¼Œæœ€å¤§é™åº¦å…¼å®¹å„ç§ MetingAPI

## å®‰è£…

1. ï¼ˆ1ï¼‰å°†æ’ä»¶ç›®å½• `astrbot_plugin_meting` æ”¾å…¥ AstrBot çš„ `data/plugins` ç›®å½•
ï¼ˆ2ï¼‰WebUIä¸­ä»é“¾æ¥å®‰è£…:https://github.com/chuyegzs/astrbot_plugin_meting
2. åœ¨ AstrBot WebUI çš„æ’ä»¶ç®¡ç†å¤„å¯ç”¨è¯¥æ’ä»¶
3. åœ¨æ’ä»¶é…ç½®ä¸­è®¾ç½® MetingAPI åœ°å€å’Œç±»å‹

## é…ç½®

åœ¨ AstrBot WebUI çš„æ’ä»¶é…ç½®é¡µé¢ä¸­ï¼Œè®¾ç½®ä»¥ä¸‹å‚æ•°ï¼š

### MetingAPI åœ°å€
- **æè¿°**ï¼šMetingAPI æœåŠ¡åœ°å€
- **æ ¼å¼**ï¼šæ ¹æ® API ç±»å‹å¡«å†™
  - **Node APIï¼ˆç±»å‹1ï¼‰**ï¼šä¸å¸¦åç¼€ï¼Œå¦‚ `https://api.example.com/meting`
  - **PHP APIï¼ˆç±»å‹2ï¼‰**ï¼šå®Œæ•´åœ°å€ï¼Œå¦‚ `https://api.example.com/meting/api.php`
  - **è‡ªå®šä¹‰å‚æ•°ï¼ˆç±»å‹3ï¼‰**ï¼šå®Œæ•´æ¨¡æ¿ï¼Œå¦‚ `https://api.i-meto.com/meting/api?server=:server&type=:type&id=:id&r=:r`

### API ç±»å‹
- **æè¿°**ï¼šé€‰æ‹© MetingAPI çš„ç±»å‹
- **å¯é€‰å€¼**ï¼š
  - `1` - Node APIï¼ˆé»˜è®¤ï¼‰ï¼šæ ‡å‡† MetingAPIï¼Œè‡ªåŠ¨æ‹¼æ¥ `/api` è·¯å¾„
  - `2` - PHP APIï¼šä½¿ç”¨ `keyword` å‚æ•°ä¼ é€’æœç´¢è¯
  - `3` - è‡ªå®šä¹‰å‚æ•°ï¼šä½¿ç”¨å ä½ç¬¦ `:server`ã€`:type`ã€`:id`ã€`:r` æ„å»ºè¯·æ±‚

### é»˜è®¤éŸ³æº
- **æè¿°**ï¼šé»˜è®¤ä½¿ç”¨çš„éŸ³ä¹å¹³å°
- **å¯é€‰å€¼**ï¼š
  - `tencent` - QQéŸ³ä¹
  - `netease` - ç½‘æ˜“äº‘éŸ³ä¹
  - `kugou` - é…·ç‹—éŸ³ä¹
  - `kuwo` - é…·æˆ‘éŸ³ä¹
- **é»˜è®¤å€¼**ï¼š`netease`

### æœç´¢ç»“æœæ˜¾ç¤ºæ•°é‡
- **æè¿°**ï¼šæœç´¢ç»“æœæ˜¾ç¤ºçš„æ­Œæ›²æ•°é‡
- **å¯é€‰å€¼**ï¼š5-30ï¼ˆæ•´æ•°ï¼‰
- **é»˜è®¤å€¼**ï¼š10

## ä½¿ç”¨æ–¹æ³•

### åˆ‡æ¢éŸ³æº

åœ¨å½“å‰ä¼šè¯ä¸­åˆ‡æ¢éŸ³ä¹å¹³å°ï¼Œä¸å½±å“å…¶ä»–ä¼šè¯ï¼š

- `åˆ‡æ¢QQéŸ³ä¹` - åˆ‡æ¢åˆ°QQéŸ³ä¹
- `åˆ‡æ¢ç½‘æ˜“äº‘` - åˆ‡æ¢åˆ°ç½‘æ˜“äº‘
- `åˆ‡æ¢é…·ç‹—` - åˆ‡æ¢åˆ°é…·ç‹—
- `åˆ‡æ¢é…·æˆ‘` - åˆ‡æ¢åˆ°é…·æˆ‘

### æœç´¢æ­Œæ›²

ä½¿ç”¨å½“å‰ä¼šè¯çš„éŸ³æºæœç´¢æ­Œæ›²ï¼š

```
æœæ­Œ ä¸€æœŸä¸€ä¼š
```

æœç´¢åä¼šæ˜¾ç¤ºæ­Œæ›²åˆ—è¡¨ï¼ŒåŒ…å«æ­Œæ›²åå’Œæ­Œæ‰‹ä¿¡æ¯ï¼ˆæ˜¾ç¤ºæ•°é‡å¯åœ¨åå°é…ç½®ï¼Œé»˜è®¤10é¦–ï¼‰ã€‚

### æ’­æ”¾æ­Œæ›²

åœ¨æœç´¢ç»“æœåï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ’­æ”¾æŒ‡å®šåºå·çš„æ­Œæ›²ï¼š

```
ç‚¹æ­Œ 1
```

å…¶ä¸­ `1` æ˜¯æ­Œæ›²åºå·ï¼Œå¯ä»¥æ˜¯æœç´¢ç»“æœä¸­çš„ä»»æ„åºå·ï¼ˆå¦‚ï¼šç‚¹æ­Œ 1ã€ç‚¹æ­Œ 2ã€ç‚¹æ­Œ 3...ï¼‰ã€‚

**æ³¨æ„**ï¼š`ç‚¹æ­Œ` å’Œæ•°å­—ä¹‹é—´å¿…é¡»æœ‰ç©ºæ ¼ã€‚

æ’ä»¶ä¼šè‡ªåŠ¨ï¼š
1. è·å–æ­Œæ›²æ’­æ”¾åœ°å€
2. ä¸‹è½½æ­Œæ›²æ–‡ä»¶
3. å¦‚æœæ­Œæ›²æ—¶é•¿è¶…è¿‡2åˆ†é’Ÿï¼Œè‡ªåŠ¨åˆ†æ®µå½•åˆ¶
4. é€æ®µå‘é€è¯­éŸ³æ¶ˆæ¯
5. æ’­æ”¾å®Œæˆåæç¤º

## ä¾èµ–

æ’ä»¶éœ€è¦ä»¥ä¸‹ä¾èµ–åº“ï¼ˆä¼šåœ¨å®‰è£…æ’ä»¶æ—¶è‡ªåŠ¨å®‰è£…ï¼‰ï¼š

- `aiohttp>=3.8.0` - å¼‚æ­¥ HTTP è¯·æ±‚
- `pydub>=0.25.1` - éŸ³é¢‘å¤„ç†

**æ³¨æ„**ï¼š`pydub` éœ€è¦ç³»ç»Ÿå®‰è£… FFmpegã€‚è¯·ç¡®ä¿ç³»ç»Ÿå·²å®‰è£… FFmpeg å¹¶åœ¨ PATH ä¸­ã€‚

### FFmpeg å®‰è£…

**Windows:**
```bash
# ä½¿ç”¨ winget
winget install ffmpeg

# æˆ–æ‰‹åŠ¨ä¸‹è½½ï¼šhttps://ffmpeg.org/download.html
```

**Linux (Ubuntu/Debian):**
```bash
sudo apt-get update
sudo apt-get install ffmpeg
```

**macOS:**
```bash
brew install ffmpeg
```

## æŠ€æœ¯è¯´æ˜

### éŸ³æºæ˜ å°„

| ç”¨æˆ·è¾“å…¥ | API å‚æ•° |
|---------|---------|
| QQéŸ³ä¹ | tencent |
| ç½‘æ˜“äº‘ | netease |
| é…·ç‹— | kugou |
| é…·æˆ‘ | kuwo |

### API ç±»å‹è¯´æ˜

**1. Node APIï¼ˆé»˜è®¤ï¼‰**
- æ ‡å‡† MetingAPI æ ¼å¼
- è¯·æ±‚åœ°å€ï¼š`{api_url}/api?server={server}&type={type}&id={id}`
- ç¤ºä¾‹ï¼š`https://api.example.com/meting/api?server=netease&type=search&id=ä¸€æœŸä¸€ä¼š`

**2. PHP API**
- PHP ç‰ˆæœ¬ MetingAPI
- è¯·æ±‚åœ°å€ï¼š`{api_url}?server={server}&type=search&id=0&keyword={keyword}&dwrc=false`
- ç¤ºä¾‹ï¼š`https://api.example.com/api.php?server=netease&type=search&id=0&keyword=ä¸€æœŸä¸€ä¼š&dwrc=false`

**3. è‡ªå®šä¹‰å‚æ•°**
- å®Œå…¨è‡ªå®šä¹‰è¯·æ±‚æ ¼å¼
- æ”¯æŒå ä½ç¬¦ï¼š`:server`ã€`:type`ã€`:id`ã€`:r`
- ç¤ºä¾‹æ¨¡æ¿ï¼š`https://api.i-meto.com/meting/api?server=:server&type=:type&id=:id&r=:r`
- æ›¿æ¢åï¼š`https://api.i-meto.com/meting/api?server=netease&type=search&id=ä¸€æœŸä¸€ä¼š&r=1708123456789`

### è¯­éŸ³åˆ†æ®µæœºåˆ¶

QQ è¯­éŸ³æ—¶é•¿ä¸Šé™ä¸º2åˆ†é’Ÿï¼Œæ’ä»¶ä¼šè‡ªåŠ¨å°†é•¿æ­Œæ›²åˆ†å‰²ä¸ºå¤šä¸ª2åˆ†é’Ÿä»¥å†…çš„ç‰‡æ®µï¼š
- æ¯æ®µæ—¶é•¿ï¼šæœ€å¤š120ç§’ï¼ˆå¯é…ç½®ï¼‰
- æ ¼å¼ï¼šWAV
- å‘é€æ–¹å¼ï¼šé€æ®µå‘é€ï¼Œæ¯æ®µé—´éš”1ç§’

### æ•°æ®å­˜å‚¨

- ä¼šè¯éŸ³æºè®¾ç½®å­˜å‚¨åœ¨å†…å­˜ä¸­ï¼Œé‡å¯åæ¢å¤ä¸ºé»˜è®¤éŸ³æº
- æœç´¢ç»“æœä¸´æ—¶å­˜å‚¨åœ¨å†…å­˜ä¸­ï¼Œä»…ç”¨äºå½“å‰ä¼šè¯
- ä¸‹è½½çš„éŸ³é¢‘æ–‡ä»¶å­˜å‚¨åœ¨ç³»ç»Ÿä¸´æ—¶ç›®å½•ï¼Œæ’­æ”¾å®Œæˆåè‡ªåŠ¨åˆ é™¤

## å¸¸è§é—®é¢˜

### Q: æç¤º"è¯·å…ˆåœ¨æ’ä»¶é…ç½®ä¸­è®¾ç½® MetingAPI åœ°å€"
A: è¯·åœ¨ AstrBot WebUI çš„æ’ä»¶é…ç½®é¡µé¢ä¸­å¡«å†™æ­£ç¡®çš„ MetingAPI åœ°å€ã€‚

### Q: æœç´¢æ­Œæ›²æ—¶æç¤º"ç½‘ç»œé”™è¯¯"
A: è¯·æ£€æŸ¥ï¼š
1. MetingAPI åœ°å€æ˜¯å¦æ­£ç¡®
2. API ç±»å‹æ˜¯å¦åŒ¹é…
3. ç½‘ç»œè¿æ¥æ˜¯å¦æ­£å¸¸
4. MetingAPI æœåŠ¡æ˜¯å¦å¯ç”¨

### Q: æ’­æ”¾æ­Œæ›²æ—¶æç¤º"ç¼ºå°‘ pydub ä¾èµ–"
A: è¯·ç¡®ä¿å·²å®‰è£… FFmpegï¼Œå¹¶é‡æ–°å®‰è£…æ’ä»¶ä¾èµ–ã€‚

### Q: è¯­éŸ³æ— æ³•å‘é€
A: è¯·æ£€æŸ¥ï¼š
1. å½“å‰å¹³å°æ˜¯å¦æ”¯æŒè¯­éŸ³æ¶ˆæ¯
2. FFmpeg æ˜¯å¦æ­£ç¡®å®‰è£…
3. ç³»ç»Ÿä¸´æ—¶ç›®å½•æ˜¯å¦æœ‰å†™å…¥æƒé™

## å¼€å‘

### é¡¹ç›®ç»“æ„

```
astrbot_plugin_meting/
â”œâ”€â”€ main.py              # æ’ä»¶ä¸»ä»£ç 
â”œâ”€â”€ metadata.yaml        # æ’ä»¶å…ƒæ•°æ®
â”œâ”€â”€ _conf_schema.json    # é…ç½®æ–‡ä»¶ Schema
â”œâ”€â”€ requirements.txt     # Python ä¾èµ–
â”œâ”€â”€ README.md           # è¯´æ˜æ–‡æ¡£
â”œâ”€â”€ LICENSE             # è®¸å¯è¯
â””â”€â”€ .gitignore         # Git å¿½ç•¥æ–‡ä»¶
```

### è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

## è®¸å¯è¯

MIT License

## è‡´è°¢

- [åˆå¶ğŸ‚MetingAPI](https://github.com/chuyegzs/Meting-UI-API) - åˆå¶ğŸ‚äºŒæ¬¡å¼€å‘çš„MetingAPI
- [MetingAPI](https://github.com/metowolf/Meting) - éŸ³ä¹ API æœåŠ¡
- [OIAPI-MusicCardSigned](https://oiapi.net/doc/id/78.html) - éŸ³ä¹å¡ç‰‡ç­¾åAPI
- [AstrBot](https://github.com/AstrBotDevs/AstrBot) - AstrBotæœºå™¨äººæ¡†æ¶

## æ”¯æŒ

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œæ¬¢è¿åŠ å…¥ åˆå¶ğŸ‚Furry å¼€å‘è€…çš„QQç¾¤ï¼š1048889481ï¼ˆå¿…ç‚¹Starï¼‰
